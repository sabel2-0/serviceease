<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Printer Inventory | ServiceEase</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>tailwind.config = { theme: { extend: {} } };</script>
</head>
<body class="bg-slate-50 min-h-screen">
    <div class="flex h-screen">
        <!-- Dynamic Sidebar -->
        <div id="dynamic-sidebar"></div>

        <main class="flex-1 overflow-auto bg-gradient-to-br from-slate-50 via-blue-50/30 to-white">
            <div class="bg-gradient-to-r from-white to-slate-50 shadow-lg border-b border-slate-200 px-4 sm:px-8 py-8">
                <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0">
                    <div class="flex items-center space-x-4">
                        <div class="bg-blue-100 p-3 rounded-xl">
                            <i class="fas fa-print text-blue-600 text-2xl"></i>
                        </div>
                        <div>
                            <h1 class="text-2xl sm:text-3xl font-bold text-slate-900 tracking-tight">Printer Inventory</h1>
                            <p class="text-slate-600 mt-2 text-base sm:text-lg">Manage and track your printer fleet</p>
                        </div>
                    </div>
                    <button id="openAddPrinter" class="w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl shadow-lg hover:from-blue-700 hover:to-blue-800 transform hover:scale-105 transition-all duration-200">
                        <i class="fas fa-plus mr-2"></i>
                        Add Printer
                    </button>
                </div>
            </div>

            <div class="p-4 sm:p-8 space-y-6">
                <div class="bg-white rounded-xl shadow-xl border border-slate-200">
                    <div class="bg-gradient-to-r from-slate-50 to-slate-100 p-4 sm:p-6 border-b border-slate-200 rounded-t-xl">
                        <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between space-y-4 sm:space-y-0">
                            <div class="flex items-center space-x-3">
                                <div class="bg-slate-600 p-2 rounded-lg">
                                    <i class="fas fa-list text-white"></i>
                                </div>
                                <h3 class="text-lg sm:text-xl font-bold text-slate-900">Printer Models</h3>
                            </div>
                            <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-6 w-full sm:w-auto">
                                <div class="flex items-center space-x-3">
                                    <label class="flex items-center space-x-2 text-sm font-medium text-slate-600 cursor-pointer">
                                        <input id="filterAvailable" type="checkbox" class="w-4 h-4 text-blue-600 border-slate-300 rounded focus:ring-blue-500 focus:ring-2"> 
                                        <span>Only available</span>
                                    </label>
                                </div>
                                <div class="bg-blue-100 px-3 py-1 rounded-full">
                                    <span id="invCount" class="text-sm font-semibold text-blue-800"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-4 sm:p-6 overflow-x-auto">
                        <!-- Grouped View -->
                        <div id="groupedView">
                            <div class="overflow-x-auto">
                                <table class="min-w-full text-sm border-collapse">
                                    <thead class="bg-gradient-to-r from-slate-50 to-slate-100 border-b-2 border-slate-200">
                                        <tr>
                                            <th class="text-left px-3 sm:px-6 py-4 font-semibold text-slate-700 tracking-wide">Brand & Model</th>
                                            <th class="text-center px-3 sm:px-6 py-4 font-semibold text-slate-700 tracking-wide">Quantity</th>
                                            <th class="text-center px-3 sm:px-6 py-4 font-semibold text-slate-700 tracking-wide">Available</th>
                                            <th class="text-center px-3 sm:px-6 py-4 font-semibold text-slate-700 tracking-wide">Assigned</th>
                                            <th class="text-right px-3 sm:px-6 py-4 font-semibold text-slate-700 tracking-wide">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="groupedTbody" class="divide-y divide-slate-100"></tbody>
                                </table>
                            </div>
                            <div id="groupedEmpty" class="hidden text-center text-slate-500 py-12 bg-slate-50 rounded-lg border-2 border-dashed border-slate-200">
                                <div class="flex flex-col items-center">
                                    <i class="fas fa-printer text-4xl text-slate-300 mb-4"></i>
                                    <p class="text-lg font-medium text-slate-400">No inventory items yet</p>
                                    <p class="text-sm text-slate-400 mt-1">Add your first printer to get started</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Printer Modal -->
    <div id="addPrinterModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all">
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-t-2xl">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="bg-white/20 p-2 rounded-lg">
                            <i class="fas fa-plus text-white"></i>
                        </div>
                        <h2 class="text-xl font-bold text-white">Add New Printer</h2>
                    </div>
                    <button id="closeAddPrinter" class="text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-all duration-200">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                </div>
            </div>
            <div class="p-6 space-y-5">
                <div class="space-y-2">
                    <label for="modalBrand" class="block text-sm font-semibold text-slate-700">Brand</label>
                    <input id="modalBrand" class="w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200" placeholder="e.g., HP, Canon, Epson">
                </div>
                <div class="space-y-2">
                    <label for="modalModel" class="block text-sm font-semibold text-slate-700">Model</label>
                    <input id="modalModel" class="w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200" placeholder="e.g., LaserJet Pro M404dn">
                </div>
                <div class="space-y-2">
                    <label for="modalSerial" class="block text-sm font-semibold text-slate-700">Serial Number</label>
                    <input id="modalSerial" class="w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200" placeholder="e.g., CNBX123456">
                </div>
            </div>
            <div class="p-6 bg-slate-50 rounded-b-2xl flex justify-end gap-3">
                <button id="cancelAddPrinter" class="px-6 py-3 border-2 border-slate-200 text-slate-600 font-semibold rounded-xl hover:bg-slate-100 hover:border-slate-300 transition-all duration-200">
                    Cancel
                </button>
                <button id="confirmAddPrinter" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl shadow-lg hover:from-blue-700 hover:to-blue-800 transform hover:scale-105 transition-all duration-200">
                    <i class="fas fa-plus mr-2"></i>
                    Add Printer
                </button>
            </div>
        </div>
    </div>

    <!-- View Printers Modal -->
    <div id="viewPrintersModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm" onclick="closeViewPrintersModal()"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-5xl mx-4 h-[700px] flex flex-col transform transition-all">
            <!-- Header - Fixed -->
            <div class="bg-gradient-to-r from-slate-600 to-slate-700 p-6 rounded-t-2xl flex-shrink-0">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="bg-white/20 p-2 rounded-lg">
                            <i class="fas fa-printer text-white"></i>
                        </div>
                        <h2 id="viewPrintersTitle" class="text-xl font-bold text-white">View Printers</h2>
                    </div>
                    <button onclick="closeViewPrintersModal()" class="text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-all duration-200">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                </div>
            </div>
            
            <!-- Printer Status Selector - Fixed -->
            <div class="p-6 bg-slate-50 border-b border-slate-200 flex-shrink-0">
                <div class="flex gap-3">
                    <button id="showAllPrinters" class="px-6 py-3 rounded-xl bg-blue-600 text-white font-semibold hover:bg-blue-700 transform hover:scale-105 transition-all duration-200 shadow-lg">
                        <i class="fas fa-layer-group mr-2"></i>
                        All Printers
                    </button>
                    <button id="showAssignedPrinters" class="px-6 py-3 rounded-xl border-2 border-slate-300 text-slate-700 font-semibold hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-all duration-200">
                        <i class="fas fa-user-check mr-2"></i>
                        Assigned Printers
                    </button>
                    <button id="showAvailablePrinters" class="px-6 py-3 rounded-xl border-2 border-slate-300 text-slate-700 font-semibold hover:bg-emerald-50 hover:border-emerald-300 hover:text-emerald-700 transition-all duration-200">
                        <i class="fas fa-check-circle mr-2"></i>
                        Available Printers
                    </button>
                </div>
            </div>
            
            <!-- Printers List - Scrollable content area -->
            <div class="flex-1 overflow-hidden flex flex-col">
                <div class="p-6 flex-1 overflow-y-auto">
                    <div id="printersListContainer">
                        <table class="min-w-full text-sm border-collapse">
                            <thead class="bg-gradient-to-r from-slate-50 to-slate-100 sticky top-0 border-b-2 border-slate-200">
                                <tr>
                                    <th class="text-left px-6 py-4 font-semibold text-slate-700 tracking-wide">Serial Number</th>
                                    <th class="text-left px-6 py-4 font-semibold text-slate-700 tracking-wide">Status</th>
                                    <th class="text-left px-6 py-4 font-semibold text-slate-700 tracking-wide">Institution</th>
                                    <th class="text-right px-6 py-4 font-semibold text-slate-700 tracking-wide">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="printersListTbody" class="divide-y divide-slate-100">
                            </tbody>
                        </table>
                        <div id="printersListEmpty" class="hidden text-center py-16">
                            <div class="flex flex-col items-center">
                                <i class="fas fa-search text-4xl text-slate-300 mb-4"></i>
                                <p class="text-lg font-medium text-slate-400">No printers found</p>
                                <p class="text-sm text-slate-400 mt-1">Try adjusting your filter selection</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Printer Modal -->
    <div id="editPrinterModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all">
            <div class="bg-gradient-to-r from-emerald-500 to-emerald-600 p-6 rounded-t-2xl">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="bg-white/20 p-2 rounded-lg">
                            <i class="fas fa-edit text-white"></i>
                        </div>
                        <h2 class="text-xl font-bold text-white">Edit Printer Model</h2>
                    </div>
                    <button id="closeEditPrinter" class="text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-all duration-200">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                </div>
            </div>
            <div class="p-6 space-y-5">
                <input type="hidden" id="editPrinterBrand">
                <input type="hidden" id="editPrinterModel">
                <div class="space-y-2">
                    <label for="editModalBrand" class="block text-sm font-semibold text-slate-700">Brand</label>
                    <input id="editModalBrand" class="w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 transition-all duration-200" placeholder="e.g., HP, Canon, Epson">
                </div>
                <div class="space-y-2">
                    <label for="editModalModel" class="block text-sm font-semibold text-slate-700">Model</label>
                    <input id="editModalModel" class="w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 transition-all duration-200" placeholder="e.g., LaserJet Pro M404dn">
                </div>
                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                    <div class="flex items-start space-x-3">
                        <i class="fas fa-info-circle text-blue-500 mt-1"></i>
                        <p class="text-sm text-blue-800">
                            This will update the brand and model name for <strong>all units</strong> of this printer type.
                        </p>
                    </div>
                </div>
            </div>
            <div class="p-6 bg-slate-50 rounded-b-2xl flex justify-end gap-3">
                <button id="cancelEditPrinter" class="px-6 py-3 border-2 border-slate-200 text-slate-600 font-semibold rounded-xl hover:bg-slate-100 hover:border-slate-300 transition-all duration-200">
                    Cancel
                </button>
                <button id="confirmEditPrinter" class="px-6 py-3 bg-gradient-to-r from-emerald-600 to-emerald-700 text-white font-semibold rounded-xl shadow-lg hover:from-emerald-700 hover:to-emerald-800 transform hover:scale-105 transition-all duration-200">
                    <i class="fas fa-save mr-2"></i>
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <!-- View Printer Info Modal -->
    <div id="viewPrinterInfoModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-lg transform transition-all">
            <div class="bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-t-2xl">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="bg-white/20 p-2 rounded-lg">
                            <i class="fas fa-info-circle text-white"></i>
                        </div>
                        <h2 class="text-xl font-bold text-white">Printer Information</h2>
                    </div>
                    <button id="closeViewInfo" class="text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-all duration-200">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="bg-gradient-to-r from-slate-50 to-slate-100 rounded-xl p-4 border border-slate-200">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Brand</label>
                            <p id="viewInfoBrand" class="text-lg font-bold text-slate-900 mt-1">-</p>
                        </div>
                        <div>
                            <label class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Model</label>
                            <p id="viewInfoModel" class="text-lg font-bold text-slate-900 mt-1">-</p>
                        </div>
                    </div>
                </div>

                <div class="space-y-3">
                    <div class="flex items-start space-x-3 p-3 bg-white border border-slate-200 rounded-lg">
                        <div class="flex-shrink-0 mt-0.5">
                            <i class="fas fa-barcode text-blue-500"></i>
                        </div>
                        <div class="flex-1">
                            <label class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Serial Number</label>
                            <p id="viewInfoSerial" class="text-base font-mono font-semibold text-slate-900 mt-1">-</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-3 p-3 bg-white border border-slate-200 rounded-lg">
                        <div class="flex-shrink-0 mt-0.5">
                            <i class="fas fa-toggle-on text-blue-500"></i>
                        </div>
                        <div class="flex-1">
                            <label class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Status</label>
                            <p id="viewInfoStatus" class="text-base font-semibold text-slate-900 mt-1">-</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-3 p-3 bg-white border border-slate-200 rounded-lg">
                        <div class="flex-shrink-0 mt-0.5">
                            <i class="fas fa-building text-blue-500"></i>
                        </div>
                        <div class="flex-1">
                            <label class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Institution</label>
                            <p id="viewInfoInstitution" class="text-base font-medium text-slate-900 mt-1">-</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-3 p-3 bg-white border border-slate-200 rounded-lg">
                        <div class="flex-shrink-0 mt-0.5">
                            <i class="fas fa-map-marker-alt text-blue-500"></i>
                        </div>
                        <div class="flex-1">
                            <label class="text-xs font-semibold text-slate-500 uppercase tracking-wide">Location</label>
                            <p id="viewInfoLocation" class="text-base font-medium text-slate-900 mt-1">-</p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-3 p-3 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg">
                        <div class="flex-shrink-0 mt-0.5">
                            <i class="fas fa-calendar-plus text-blue-600"></i>
                        </div>
                        <div class="flex-1">
                            <label class="text-xs font-semibold text-blue-600 uppercase tracking-wide">Date Added</label>
                            <p id="viewInfoDateAdded" class="text-base font-semibold text-blue-900 mt-1">-</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="p-6 bg-slate-50 rounded-b-2xl flex justify-end">
                <button id="closeViewInfoBtn" class="px-6 py-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white font-semibold rounded-xl shadow-lg hover:from-blue-700 hover:to-blue-800 transform hover:scale-105 transition-all duration-200">
                    <i class="fas fa-times mr-2"></i>
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Edit Printer Unit Modal -->
    <div id="editPrinterUnitModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="absolute inset-0 bg-black/50 backdrop-blur-sm"></div>
        <div class="relative bg-white rounded-2xl shadow-2xl w-full max-w-md transform transition-all">
            <div class="bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-t-2xl">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-3">
                        <div class="bg-white/20 p-2 rounded-lg">
                            <i class="fas fa-edit text-white"></i>
                        </div>
                        <h2 class="text-xl font-bold text-white">Edit Printer Unit</h2>
                    </div>
                    <button id="closeEditUnit" class="text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-all duration-200">
                        <i class="fa-solid fa-xmark text-lg"></i>
                    </button>
                </div>
            </div>
            <div class="p-6 space-y-5">
                <input type="hidden" id="editUnitId">
                <div class="space-y-2">
                    <label for="editUnitBrand" class="block text-sm font-semibold text-slate-700">Brand</label>
                    <input id="editUnitBrand" class="w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-slate-900 bg-slate-100 cursor-not-allowed" disabled placeholder="Brand">
                </div>
                <div class="space-y-2">
                    <label for="editUnitModel" class="block text-sm font-semibold text-slate-700">Model</label>
                    <input id="editUnitModel" class="w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-slate-900 bg-slate-100 cursor-not-allowed" disabled placeholder="Model">
                </div>
                <div class="space-y-2">
                    <label for="editUnitSerial" class="block text-sm font-semibold text-slate-700">Serial Number</label>
                    <input id="editUnitSerial" class="w-full border-2 border-slate-200 rounded-xl px-4 py-3 text-slate-900 focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all duration-200" placeholder="e.g., CNBX123456">
                </div>
                <div class="bg-amber-50 border border-amber-200 rounded-xl p-4">
                    <div class="flex items-start space-x-3">
                        <i class="fas fa-info-circle text-amber-500 mt-1"></i>
                        <p class="text-sm text-amber-800">
                            This will only update the serial number for <strong>this specific unit</strong>.
                        </p>
                    </div>
                </div>
            </div>
            <div class="p-6 bg-slate-50 rounded-b-2xl flex justify-end gap-3">
                <button id="cancelEditUnit" class="px-6 py-3 border-2 border-slate-200 text-slate-600 font-semibold rounded-xl hover:bg-slate-100 hover:border-slate-300 transition-all duration-200">
                    Cancel
                </button>
                <button id="confirmEditUnit" class="px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white font-semibold rounded-xl shadow-lg hover:from-purple-700 hover:to-purple-800 transform hover:scale-105 transition-all duration-200">
                    <i class="fas fa-save mr-2"></i>
                    Save Changes
                </button>
            </div>
        </div>
    </div>

    <script src="../../js/auth.js"></script>
    <script src="../../js/dynamic-sidebar-loader.js"></script>
    <script src="../../js/inventory-items.js"></script>
</body>
</html>
